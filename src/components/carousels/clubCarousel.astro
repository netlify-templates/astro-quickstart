---
import Carousel from '../carousel.astro'
import LargeImage from '../largeImage.astro'

var images = await Astro.glob('../../../imgs/club_photos/*')

function getFName(str) {
    if (str.includes('/')) str = str.split('/').slice(-1)[0]

    if (str.includes('.')) {
        var rem = str.split('.').splice(-2, 1)
        str = str.split(`.${rem}.`).join('.')
    }
    return str
}

const { carouselIndex } = Astro.props
var dId = 'clubCarousel'
---
<Carousel carouselIndex={carouselIndex} dataColumns={images.length} dataId={dId}>
    {
        images.map((img, i) => {
            img = img.default
            return <pre>{JSON.stringify(img.src, null, 4)}</pre>
            // var src = `/assets/club_photos/previews/${getFName(img.src)}`
            // return <LargeImage id={`${dId}-${i}`} src={src} draggable={false} />
        })
    }
</Carousel>