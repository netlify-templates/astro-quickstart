---
import Carousel from '../carousel.astro'

var images = await Astro.glob('../../../public/assets/club_photos/previews/*')

function getFName(str) {
    if (str.includes('/')) str = str.split('/').slice(-1)[0]

    if (str.includes('.')) {
        str = str.split('.')
        console.log(str)
        // str.splice(-2, 1).join('.')
    }
    return str
}

const { carouselIndex } = Astro.props
---
<Carousel carouselIndex={carouselIndex}>
    {
        images.map((img, i) => {
            img = img.default
            switch (i) {
                case 0: 
                    return <img class="left" src={`/assets/club_photos/previews/${getFName(img.src)}`} draggable="false" />
                    break
                case 1: 
                    return <img class="active" src={`/assets/club_photos/previews/${getFName(img.src)}`} draggable="false" />
                    break
                case 2: 
                    return <img class="right" src={`/assets/club_photos/previews/${getFName(img.src)}`} draggable="false" />
                    break
                default: 
                    return <img src={`/assets/club_photos/previews/${getFName(img.src)}`} draggable="false" />
                    break
            }
        })
    }
    <!-- <img class="left" src="/assets/club_photos/previews/IMG_0506.jpg" draggable="false">
    <img class="active" src="/assets/club_photos/previews/IMG_0496.jpg" draggable="false">
    <img class="right" src="/assets/club_photos/previews/IMG_0498.jpg" draggable="false">
    <img src="/assets/club_photos/previews/IMG_0499.jpg" draggable="false">
    <img src="/assets/club_photos/previews/IMG_0510.jpg" draggable="false">
    <img src="/assets/club_photos/previews/IMG_0512.jpg" draggable="false">
    <img src="/assets/club_photos/previews/IMG_0513.jpg" draggable="false">
    <img src="/assets/club_photos/previews/IMG_0515.jpg" draggable="false"> -->
</Carousel>